<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.ssafy.hashtag.db">

    <!-- 회원가입 -->
    <insert id="Signup" parameterType="com.ssafy.hashtag.db.dto.UserDto">
        INSERT INTO User(email, name, nickname, phone_number, password, grade, profile_image, together, description)
        VALUES (#{email},
                #{name},
                #{nickname},
                #{phone_number},
                #{password},
                #{grade},
                #{profile_image},
                #{together},
                #{description}  )
    </insert>

    <!-- 닉네임 중복 검사 -->
	  <select id="check_name" parameterType="java.lang.String" resultType="java.lang.Integer">
        select count(*) from User where nickname = #{nickname}
    </select>
        
    <!-- 이메일 중복 검사 -->
    <select id="check_email" parameterType="java.lang.String" resultType="java.lang.Integer">
        select count(*) from User where email = #{email}
    </select>

    <!-- 로그인 -->
    <select id="check_login" parameterType="java.lang.String" resultType="com.ssafy.hashtag.db.dto.UserDto">
        SELECT * FROM User WHERE email=#{email}
    </select>

    <!-- 회원 탈퇴 및 삭제 -->
    <delete id="delete_user" parameterType="java.lang.Integer">
        DELETE FROM User WHERE user_pk=#{user_pk}
    </delete>

    <!-- 회원정보 수정 -->
    <update id="update_user" parameterType="com.ssafy.hashtag.db.dto.UserDto">
      UPDATE User 
      SET
      name=#{name},
      nickname=#{nickname},
      phone_number=#{phone_number},
      password=#{password},
      grade=#{grade},
      profile_image=#{profile_image},
      together=#{together},
      description=#{description}
      WHERE 
      user_pk=#{user_pk}
    </update>
</mapper>